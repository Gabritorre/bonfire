{% extends "layout/header.html" %}

{% block head %}
{{super()}}
<link rel="stylesheet" href="/css/index.css" />
<script src="/js/index.js"></script>
{% endblock %}

{% block view %}
{{super()}}
<div class="overflow-scroll flex-grow-1" x-data="index">
	<div class="container d-flex justify-content-center">
		<div class="feed row row-cols-1 gy-3 gx-0">
			<div class="col pt-2">
				<div class="accordion accordion-flush">
					<div class="accordion-item">
						<div class="accordion-header row">
							<div class="col"></div>
							<div class="col d-flex justify-content-center">
								<ul class="nav nav-underline flex-nowrap">
									<li class="nav-item">
										<button class="nav-link active" title="See what the world is up to">Explore</button>
									</li>
									<li class="nav-item">
										<button class="nav-link text-muted" title="See what your friends are up to" :disabled="!account.authenticated || account.is_adv">Friends</button>
									</li>
								</ul>
							</div>
							<div class="col d-flex justify-content-end">
								<button class="btn btn-dark rounded-circle collapsed" title="Share your thoughts" data-bs-toggle="collapse" data-bs-target="#section-send-content" x-show="account.authenticated && !account.is_adv">
									<div class="collapse-fade-icons">
										<i class="bi bi-pen"></i>
										<i class="bi bi-pen-fill"></i>
									</div>
								</button>
							</div>
						</div>
						<div id="section-send-content" class="accordion-collapse collapse" data-bs-parent="#section-danger">
							<div class="accordion-body row row-cols-1 pb-2">
								<div class="col">
									<div class="row">
										<div class="col d-flex align-items-center">
											<img class="profile-picture profile-picture-1 me-2" :src="account.pfp" />
											<div class="fw-bold" x-text="account.name ?? account.handle"></div>
										</div>
										<div class="col-auto">
											<button class="btn btn-light rounded-pill" @click="submit_post">Post</button>
										</div>
									</div>
								</div>
								<div class="col mt-3">
									<textarea class="form-control" rows="3" x-model="draft.body"></textarea>
								</div>
								<div class="col mt-3">
									<input class="form-control" type="file" autocomplete="off" x-ref="media" @change="draft.media = $refs.media.files[0]" />
								</div>
								<div class="col mt-3" x-data="{interests: draft.interests}">
									{% include "layout/tags.html" %}
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>

			<div class="col">
				{% include "layout/feed.html" %}
			</div>
		</div>
	</div>
</div>
{% endblock %}
